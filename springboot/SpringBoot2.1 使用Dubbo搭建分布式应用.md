[TOC]

# SpringBoot2.1 使用Dubbo搭建分布式应用

## 一、为什么使用分布式

在系统越来越庞大的时候，单纯使用集群的方式来部署应用已经不能满足现实情况。此时就需要依照业务或技术维度，将系统拆分成多个模块，作为独立服务单独部署。

分布式系统，很灵活。

高复用的模块，可以多部署一些节点，边缘模块相对少部署几个节点。如此不仅降低了硬件成本，而且提升了系统整体的健壮性。

## 二、Dubbo在分布式系统中扮演的角色

有拆分，就有交互。

原来，所有模块都写在一个项目中，直接通过代码调用即可完成两个模块间的交互。

现在，将系统切割成多个单独运行的模块，系统间交互部分，就可以使用Dubbo来完成。

## 三、Dubbo前世今生

阿里巴巴2011年开源的优秀Java RPC框架

2013年以后，停止维护。

2017年9月，开始重新维护，并疯狂更新。

2018年2月15日，成为 Apache 基金会孵化项目。

近期，准备发布的2.7版本，有望成为Apache顶级项目

## 四、Dubbo架构介绍

- 架构图

![](https://note.youdao.com/yws/public/resource/ed3ed7bda9e698e627156617e6359390/xmlnote/9B3EAA638B2A4168BB4A3196DD5B7F01/9636)

- 节点角色说明



| 节点      | 角色说明                               |
| --------- | -------------------------------------- |
| Provider  | 暴露服务的服务提供方                   |
| Consumer  | 调用远程服务的服务消费方               |
| Registry  | 服务注册与发现的注册中心               |
| Monitor   | 统计服务的调用次数和调用时间的监控中心 |
| Container | 服务运行容器                           |

- 调用关系说明，对应上图编号



0-服务容器负责启动，加载，运行服务提供者。

1-服务提供者在启动时，向注册中心注册自己提供的服务。

2-服务消费者在启动时，向注册中心订阅自己所需的服务。

3-注册中心返回服务提供者地址列表给消费者，如果有变更，注册中心将基于长连接推送变更数据给消费者。

4-服务消费者，从提供者地址列表中，基于软负载均衡算法，选一台提供者进行调用，如果调用失败，再选另一台调用。

5-服务消费者和提供者，在内存中累计调用次数和调用时间，定时每分钟发送一次统计数据到监控中心。